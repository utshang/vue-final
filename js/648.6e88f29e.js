"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[648],{8609:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(6252),l=t(3577);const r={class:"d-flex justify-content-around mt-5"};function o(e,s,t,o,i,c){return(0,a.wg)(),(0,a.iD)("ul",r,[(0,a._)("li",{class:(0,l.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":t.step>"0"}])},[(0,a._)("div",{class:(0,l.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":t.step>"0"}])}," 1 ",2),(0,a._)("p",{class:(0,l.C_)(["font fs-7",{"font-active":t.step>"0"}])},"購物清單",2)],2),(0,a._)("li",{class:(0,l.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":t.step>"1"}])},[(0,a._)("div",{class:(0,l.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":t.step>"1"}])}," 2 ",2),(0,a._)("p",{class:(0,l.C_)(["font fs-7",{"font-active":t.step>"1"}])},"填寫資料",2)],2),(0,a._)("li",{class:(0,l.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":t.step>"2"}])},[(0,a._)("div",{class:(0,l.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":t.step>"2"}])}," 3 ",2),(0,a._)("p",{class:(0,l.C_)(["font fs-7",{"font-active":t.step>"2"}])},"確認訂單",2)],2)])}var i={props:{step:String}},c=t(3744);const d=(0,c.Z)(i,[["render",o],["__scopeId","data-v-5d7e876a"]]);var n=d},2648:function(e,s,t){t.r(s),t.d(s,{default:function(){return H}});var a=t(6252),l=t(3577),r=t(9963);const o=e=>((0,a.dD)("data-v-e851753a"),e=e(),(0,a.Cn)(),e),i={class:"container"},c={class:"row my-5"},d={class:"col-md-6"},n={class:"cart-list rounded-3 shadow p-5"},m=o((()=>(0,a._)("div",{class:"d-flex justify-content-between align-items-end fs-7 border-bottom border-2 border-secondary pb-3"},[(0,a._)("h2",{class:"fw-bold fs-4"},"購物清單")],-1))),u={class:"cart-list-body mt-4 d-flex"},f={class:"d-flex flex-grow-1"},p=["src","alt"],_={class:"d-flex flex-column justify-content-start ms-3 mt-2"},g={class:"fs-5 fw-bold text-black"},b={class:"d-sm-none d-flex align-items-end"},v={class:"fw-bold fs-7 mt-3"},h={class:"fs-8 text-muted ms-2"},x={class:"d-sm-flex flex-sm-column mt-1"},w={class:"d-none d-sm-block"},y={class:"mb-2 fw-bold fs-5"},k={class:"fs-7 text-muted d-flex flex-column align-items-end"},$={key:0},C={class:"text-end fw-bold text-primary fs-4 mt-5"},V={class:"mb-5 justify-content-center col-md-6"},W=o((()=>(0,a._)("div",null,[(0,a._)("h2",{class:"border-bottom border-2 border-secondary fs-4 fw-bold pb-3"}," 填寫資料 ")],-1))),D={class:"form-floating form-downline mt-4 mb-3"},q=o((()=>(0,a._)("label",{for:"name",class:"form-label"},[(0,a._)("span",{class:"text-danger"},"* "),(0,a.Uk)("姓名")],-1))),U={class:"form-floating form-downline mb-3"},j=o((()=>(0,a._)("label",{for:"tel",class:"form-label"},[(0,a._)("span",{class:"text-danger"},"* "),(0,a.Uk)("聯絡電話")],-1))),z={class:"form-floating form-downline mb-3"},L=o((()=>(0,a._)("label",{for:"address",class:"form-label"},[(0,a._)("span",{class:"text-danger"},"* "),(0,a.Uk)("寄送地址")],-1))),T={class:"form-floating form-downline"},P=o((()=>(0,a._)("label",{for:"email",class:"form-label"},[(0,a._)("span",{class:"text-danger"},"* "),(0,a.Uk)("Email")],-1))),S={class:"mt-3"},N=o((()=>(0,a._)("label",{for:"message",class:"form-label ps-2"},"備註",-1))),E={class:"d-flex justify-content-around p-0 mt-4"},I=["disabled"];function Z(e,s,t,o,Z,F){const M=(0,a.up)("ProgressBar"),O=(0,a.up)("RouterLink"),B=(0,a.up)("VeeField"),H=(0,a.up)("ErrorMessage"),Y=(0,a.up)("VeeForm"),K=(0,a.up)("VeeLoading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(M,{step:"2"}),(0,a._)("div",i,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("div",n,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Z.cartData.carts,(s=>((0,a.wg)(),(0,a.iD)("div",{key:s.id},[(0,a._)("div",u,[(0,a._)("div",f,[(0,a.Wm)(O,{to:`/product/${s.product.id}`},{default:(0,a.w5)((()=>[(0,a._)("img",{class:"cart-img rounded-3",src:s.product.imageUrl,alt:s.title},null,8,p)])),_:2},1032,["to"]),(0,a._)("div",_,[(0,a.Wm)(O,{to:`/product/${s.product.id}`,class:"mb-3"},{default:(0,a.w5)((()=>[(0,a._)("h1",g,(0,l.zw)(s.product.title),1)])),_:2},1032,["to"]),(0,a._)("p",null,"數量："+(0,l.zw)(s.qty)+" "+(0,l.zw)(s.product.unit),1),(0,a._)("div",b,[(0,a._)("p",v," NT$ "+(0,l.zw)(e.$filters.currency(s.product.price*s.qty)),1),(0,a._)("del",h," NT$ "+(0,l.zw)(e.$filters.currency(s.product.origin_price*s.qty)),1)])])]),(0,a._)("div",x,[(0,a._)("div",w,[(0,a._)("p",y," NT$ "+(0,l.zw)(e.$filters.currency(s.product.price*s.qty)),1),(0,a._)("del",k," NT$ "+(0,l.zw)(e.$filters.currency(s.product.origin_price*s.qty)),1)])])])])))),128)),Z.cartData.carts?.length?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("p",C," 總金額 NT$ "+(0,l.zw)(e.$filters.currency(Z.cartData.final_total)),1)])):(0,a.kq)("",!0)])]),(0,a._)("div",V,[(0,a.Wm)(Y,{class:"rounded-3 shadow p-5",ref:"form",onSubmit:F.createOrder},{default:(0,a.w5)((({errors:e})=>[W,(0,a._)("div",D,[(0,a.Wm)(B,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),rules:"required",modelValue:Z.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>Z.form.user.name=e),placeholder:"請輸入姓名"},null,8,["class","modelValue"]),q,(0,a.Wm)(H,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",U,[(0,a.Wm)(B,{id:"tel",name:"電話",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),rules:"required|min:8|max:10",modelValue:Z.form.user.tel,"onUpdate:modelValue":s[1]||(s[1]=e=>Z.form.user.tel=e),placeholder:"請輸入電話"},null,8,["class","modelValue"]),j,(0,a.Wm)(H,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",z,[(0,a.Wm)(B,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),rules:"required",modelValue:Z.form.user.address,"onUpdate:modelValue":s[2]||(s[2]=e=>Z.form.user.address=e),placeholder:"請輸入地址"},null,8,["class","modelValue"]),L,(0,a.Wm)(H,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",T,[(0,a.Wm)(B,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),rules:"email|required",modelValue:Z.form.user.email,"onUpdate:modelValue":s[3]||(s[3]=e=>Z.form.user.email=e),placeholder:"請輸入Email"},null,8,["class","modelValue"]),P,(0,a.Wm)(H,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",S,[N,(0,a.wy)((0,a._)("textarea",{id:"message",class:"form-control border border-1",cols:"20",rows:"5","onUpdate:modelValue":s[4]||(s[4]=e=>Z.form.message=e)},null,512),[[r.nr,Z.form.message]])]),(0,a._)("div",E,[(0,a._)("button",{type:"button",class:"btn text-muted w-50 fs-5 border border-2 me-3",onClick:s[5]||(s[5]=e=>F.goToPreviousPage())}," 返回 "),(0,a._)("button",{type:"submit",class:"btn btn-primary text-white w-50 fs-5",disabled:Object.keys(e).length>0}," 前往付款 ",8,I)])])),_:1},8,["onSubmit"])])])]),(0,a.Wm)(K,{active:Z.isLoading},null,8,["active"])],64)}var F=t(8609),M={components:{ProgressBar:F.Z},data(){return{loadingStatus:{loadingItem:""},isLoading:!1,cartPrice:{},cartData:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){document.documentElement.scrollTop=0,this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/utshang216/cart").then((e=>{this.cartData=e.data.data,this.isLoading=!1})).catch((e=>{this.$httpMessageState(e.response,"錯誤訊息")}))},createOrder(){this.isLoading=!0,this.$http.post("https://vue3-course-api.hexschool.io/api/utshang216/order",{data:this.form}).then((e=>{this.isLoading=!1,this.$refs.form.resetForm(),this.form.message="";const{orderId:s}=e.data;this.$router.push(`/checkout/${s}`)})).catch((e=>{this.$httpMessageState(e.response,"錯誤訊息")}))},goToPreviousPage(){this.$router.go(-1)}},mounted(){this.getCart()}},O=t(3744);const B=(0,O.Z)(M,[["render",Z],["__scopeId","data-v-e851753a"]]);var H=B}}]);
//# sourceMappingURL=648.6e88f29e.js.map