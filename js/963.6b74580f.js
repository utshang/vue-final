"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[963],{9208:function(t,e){e["Z"]={inject:["emitter"],data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{toggleFav(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.emitter.emit("push-message",{style:"success",title:"已經加入最愛囉！"})):(this.favorite.splice(e,1),this.emitter.emit("push-message",{style:"danger",title:"已經移除最愛囉！"})),this.emitter.emit("get-fav",this.favorite)}},watch:{favorite:{deep:!0,handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))}}}}},5545:function(t,e,s){s.d(e,{Z:function(){return v}});var a=s(6252),i=s(3577),r=s(9963);const o={"aria-label":"Page navigation example"},c={class:"pagination"},l=(0,a._)("span",{"aria-hidden":"true"},"«",-1),n=[l],d={key:0,class:"page-link text-standard"},p=["onClick"],g=(0,a._)("span",{"aria-hidden":"true"},"»",-1),u=[g];function h(t,e,s,l,g,h){return(0,a.wg)(),(0,a.iD)("nav",o,[(0,a._)("ul",c,[(0,a._)("li",{class:(0,i.C_)(["page-item",{disabled:!s.pages.has_pre}])},[(0,a._)("a",{class:"page-link text-standard",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,r.iM)((t=>h.emitPages(s.pages.current_page-1)),["prevent"]))},n)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.pages.total_pages,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t+"page",class:(0,i.C_)(["page-item",{active:t===s.pages.current_page}])},[t===s.pages.current_page?((0,a.wg)(),(0,a.iD)("span",d,(0,i.zw)(t),1)):((0,a.wg)(),(0,a.iD)("a",{key:1,class:"page-link text-standard",href:"#",onClick:(0,r.iM)((e=>h.emitPages(t)),["prevent"])},(0,i.zw)(t),9,p))],2)))),128)),(0,a._)("li",{class:(0,i.C_)(["page-item",{disabled:!s.pages.has_next}])},[(0,a._)("a",{class:"page-link text-standard",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,r.iM)((t=>h.emitPages(s.pages.current_page+1)),["prevent"]))},u)],2)])])}var m={props:["pages"],methods:{emitPages(t){this.$emit("emit-pages",t)}}},f=s(3744);const _=(0,f.Z)(m,[["render",h]]);var v=_},9265:function(t,e,s){s.r(e),s.d(e,{default:function(){return tt}});var a=s(6252),i=s(9963),r=s(3577);const o=t=>((0,a.dD)("data-v-2539b57f"),t=t(),(0,a.Cn)(),t),c={class:"main container"},l={class:"d-sm-flex justify-content-sm-between mb-5"},n={class:"breadcrumb"},d={class:"breadcrumb-item"},p=(0,a.Uk)("首頁"),g={class:"breadcrumb-item active","aria-current":"page"},u=(0,a.Uk)("全部產品"),h={class:"d-flex"},m=o((()=>(0,a._)("span",{class:"material-icons-outlined text-white"}," search ",-1))),f=[m],_={class:"menu row mt-5"},v={class:"category ps-md-5 col-md-6 col-lg-3"},w=(0,a.Uk)(" 全部商品"),y=o((()=>(0,a._)("span",{class:"ms-2 material-icons-outlined"}," local_florist ",-1))),b=[w,y],k={class:"d-flex d-md-block justify-content-evenly mt-3"},x=["onClick"],C={class:"fs-5"},P={class:"col-md-6 col-lg-9"},D={key:0,class:"text-center pt-4"},$=o((()=>(0,a._)("span",{class:"material-icons-outlined sentiment_dissatisfied text-primary pb-3"}," sentiment_dissatisfied ",-1))),L=o((()=>(0,a._)("p",{class:"text-muted mb-4 fs-5 fw-bold"},"沒有符合條件的搜尋結果！",-1))),j=[$,L],z={key:1,class:"row row-cols-1 row-cols-sm-2 row-cols-xl-3 g-4"},I={class:"card border-width h-100 shadow"},S=["onClick"],N={key:0,class:"material-icons-outlined favorite position-absolute text-white"},U={key:1,class:"material-icons-outlined favorite position-absolute text-white"},W={class:"card-body d-flex align-items-end justify-content-between"},M={class:"card-body-content"},T={key:0,class:"price fs-6 fw-bold text-primary mt-3"},Z={key:1,class:"origin-price d-flex align-items-end mt-3"},E={class:"fs-6 pe-2 text-primary fs-5 fw-bold"},H={class:"fs-7 text-muted"},Y=["onClick"],K={key:0,class:"loader",title:"1"},V=o((()=>(0,a._)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[(0,a._)("path",{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},[(0,a._)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})])],-1))),A=[V],F={key:1,class:"cart-icon text-primary"},J=o((()=>(0,a._)("span",{class:"material-icons-outlined"}," add_shopping_cart ",-1))),O=[J];function R(t,e,s,o,m,w){const y=(0,a.up)("RouterLink"),$=(0,a.up)("PaginationCom"),L=(0,a.up)("VeeLoading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",c,[(0,a._)("div",l,[(0,a._)("ol",n,[(0,a._)("li",d,[(0,a.Wm)(y,{to:"/"},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(y,{class:"text-standard",to:"/products",onClick:w.getProductsList},{default:(0,a.w5)((()=>[u])),_:1},8,["onClick"])])]),(0,a._)("div",null,[(0,a._)("div",h,[(0,a.wy)((0,a._)("input",{type:"search","onUpdate:modelValue":e[0]||(e[0]=t=>m.search=t),placeholder:"請輸入關鍵字",class:"fs-7 px-2 rounded-0 border border-1 border-muted w-100"},null,512),[[i.nr,m.search,void 0,{trim:!0}]]),(0,a._)("button",{type:"submit",class:"btn bg-primary d-flex align-items-center rounded-0",onClick:e[1]||(e[1]=(...t)=>w.searchProducts&&w.searchProducts(...t))},f)]),(0,a._)("ul",{class:(0,r.C_)(["search-list shadow mt-2 position-absolute",m.searchComplete?"":"d-none"])},[(0,a._)("h1",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.matchProducts,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"search-result p-3 fs-7",key:t.title},[(0,a.Wm)(y,{to:`/product/${t.id}`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.title),1)])),_:2},1032,["to"])])))),128))])],2)])]),(0,a._)("div",_,[(0,a._)("div",v,[(0,a._)("h2",{class:"mb-4 fs-4 fw-bold text-primary d-flex align-items-center justify-content-center justify-content-md-start",onClick:e[2]||(e[2]=t=>w.getCategory(""))},b),(0,a._)("ul",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.categories,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"mb-4",key:`類別_${t}`,onClick:e=>w.getCategory(t)},[(0,a._)("a",null,[(0,a._)("h2",C,(0,r.zw)(t),1)])],8,x)))),128))])]),(0,a._)("div",P,[0===m.products.length?((0,a.wg)(),(0,a.iD)("div",D,j)):((0,a.wg)(),(0,a.iD)("div",z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.products,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col",key:e.id},[(0,a._)("div",I,[(0,a._)("div",{class:"fav-icon position-absolute",onClick:s=>t.toggleFav(e.id)},[t.favorite.includes(e.id)?((0,a.wg)(),(0,a.iD)("span",N," favorite ")):((0,a.wg)(),(0,a.iD)("span",U," favorite_border "))],8,S),(0,a.Wm)(y,{to:`/product/${e.id}`},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"card-img",style:(0,r.j5)({backgroundImage:`url(${e.imageUrl})`})},null,4)])),_:2},1032,["to"]),(0,a._)("div",W,[(0,a._)("div",M,[(0,a.Wm)(y,{class:"card-title fs-5 text-black fw-bold lh-base mb-2",to:`/product/${e.id}`},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.title),1)])),_:2},1032,["to"]),e.origin_price===e.price?((0,a.wg)(),(0,a.iD)("div",T," NT$ "+(0,r.zw)(t.$filters.currency(e.price))+" 元 ",1)):((0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("p",E," NT$ "+(0,r.zw)(t.$filters.currency(e.price))+" 元 ",1),(0,a._)("del",H," NT$ "+(0,r.zw)(t.$filters.currency(e.origin_price))+" 元",1)]))]),(0,a._)("div",{onClick:t=>w.addCart(e.id)},[m.loadingItem===e.id?((0,a.wg)(),(0,a.iD)("div",K,A)):((0,a.wg)(),(0,a.iD)("a",F,O))],8,Y)])])])))),128))]))])]),(0,a.Wm)($,{class:"d-flex justify-content-md-end justify-content-center mt-5",pages:m.pagination,onEmitPages:w.getProductsList},null,8,["pages","onEmitPages"])]),(0,a.Wm)(L,{active:m.isLoading},null,8,["active"])],64)}var q=s(5545),B=s(9208),G={data(){return{product:{},products:[],allProducts:[],pagination:{},category:"",categories:[],cartData:{},loadingItem:"",isLoading:!1,currentPage:1,search:"",searchResult:[],searchComplete:!1}},mixins:[B.Z],inject:["emitter"],components:{PaginationCom:q.Z},methods:{getProductsList(t=1){document.documentElement.scrollTop=0,this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/utshang216/products/?page=${t}&category=${this.category}`).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},addCart(t,e=1){this.loadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/utshang216/cart",{data:{product_id:t,qty:e}}).then((()=>{this.loadingItem="",this.emitter.emit("push-message",{style:"success",title:"成功加入購物車囉！"}),this.emitter.emit("get-cart")})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"加入購物車失敗囉，請重新加入！"})}))},getAllProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/utshang216/products/all").then((t=>{this.allProducts=t.data.products,this.isLoading=!1,this.getCategories()})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},getCategories(){const t=this.allProducts.map((t=>t.category));this.categories=new Set(t)},getCategory(t){this.category=t},searchProducts(){this.products=this.matchProducts,this.searchComplete=!1,this.search=""}},watch:{category(){this.getProductsList()},search(){this.search?(this.searchComplete=!0,this.pagination.current_page=1,this.pagination.total_pages=1,this.pagination.has_next=!1):this.searchComplete=!1}},computed:{matchProducts(){const t=this.search.split(" "),e=[];return t.forEach((t=>{this.allProducts.forEach((s=>{s.title.includes(t)&&e.push(s)}))})),[...new Set(e)]}},mounted(){this.getProductsList(),this.getAllProducts(),this.emitter.emit("get-fav",this.favorite)}},Q=s(3744);const X=(0,Q.Z)(G,[["render",R],["__scopeId","data-v-2539b57f"]]);var tt=X}}]);
//# sourceMappingURL=963.6b74580f.js.map