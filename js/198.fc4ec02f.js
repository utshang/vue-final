"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[198],{9208:function(t,e){e["Z"]={inject:["emitter"],data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{toggleFav(t){const e=this.favorite.findIndex((e=>e===t));-1===e?(this.favorite.push(t),this.emitter.emit("push-message",{style:"success",title:"已經加入最愛囉！"})):(this.favorite.splice(e,1),this.emitter.emit("push-message",{style:"danger",title:"已經移除最愛囉！"})),this.emitter.emit("get-fav",this.favorite)}},watch:{favorite:{deep:!0,handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))}}}}},9198:function(t,e,i){i.r(e),i.d(e,{default:function(){return q}});var s=i(6252),a=i(3577);const r=t=>((0,s.dD)("data-v-5bee7d74"),t=t(),(0,s.Cn)(),t),l={class:"container"},d=r((()=>(0,s._)("h2",{class:"title text-primary fw-bold text-center mt-5"},"我的最愛",-1))),o={key:0,class:"p-5 text-center"},n=r((()=>(0,s._)("span",{class:"material-icons-outlined heart_broken text-primary mb-3"}," heart_broken ",-1))),c=r((()=>(0,s._)("p",{class:"text-muted mb-4"},"我的最愛空空的唷！",-1))),m=(0,s.Uk)("來去逛逛！"),u={key:1,class:"fav-list my-5"},p={class:"fav-item rounded-3 shadow p-4 mb-4 d-flex row"},h={class:"col-sm-5 col-md-3"},g=["src","alt"],f={class:"col-sm-7 col-md-9 mt-4 mt-sm-1 d-flex flex-column justify-content-between"},v={class:"d-flex justify-content-between"},b={class:"badge bg-primary fav-item-tag mb-3 d-flex align-items-center justify-content-center"},x=["onClick"],w={key:0,class:"material-icons-outlined text-primary favorite"},_={key:1,class:"material-icons-outlined text-primary favorite"},y={class:"fav-body mt-sm-1"},k={class:"fav-item-title text-primary fw-bold mb-3 lh-base"},I={class:"fav-item-description fs-7 text-muted mb-4 lh-base"},$={class:"d-flex align-items-end fw-bold"},C={class:"fs-5 text-black me-2"},D={class:"fs-7 text-muted"},j={class:"d-md-flex flex-md-column align-self-md-end"},L=["onClick","disabled"],z=(0,s.Uk)(" 加入購物車 "),F={key:0,class:"loader",title:"1"},N=r((()=>(0,s._)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[(0,s._)("path",{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},[(0,s._)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})])],-1))),P=[N];function S(t,e,r,N,S,T){const W=(0,s.up)("RouterLink"),U=(0,s.up)("VeeLoading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:"banner mt-3 d-md-none d-block",style:(0,a.j5)({backgroundImage:`url(${i(6497)} )`})},null,4),(0,s._)("div",l,[(0,s._)("div",{class:"banner mt-3 d-md-block d-none",style:(0,a.j5)({backgroundImage:`url(${i(6497)} )`})},null,4),d,0===S.product.length?((0,s.wg)(),(0,s.iD)("div",o,[n,c,(0,s.Wm)(W,{to:"/products",class:"bg-primary text-white py-2 px-5 rounded-3"},{default:(0,s.w5)((()=>[m])),_:1})])):((0,s.wg)(),(0,s.iD)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(S.product,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("div",p,[(0,s._)("div",h,[(0,s.Wm)(W,{to:`/product/${e.id}`},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"fav-item-img rounded-3",src:e.imageUrl,alt:e.title},null,8,g)])),_:2},1032,["to"])]),(0,s._)("div",f,[(0,s._)("div",null,[(0,s._)("div",v,[(0,s._)("span",b,(0,a.zw)(e.category),1),(0,s._)("div",{class:"fav-icon text-end",onClick:i=>(t.toggleFav(e.id),T.getFavoriteProducts())},[t.favorite.includes(e.id)?((0,s.wg)(),(0,s.iD)("span",w," favorite ")):((0,s.wg)(),(0,s.iD)("span",_," favorite_border "))],8,x)]),(0,s._)("div",y,[(0,s.Wm)(W,{to:`/product/${e.id}`},{default:(0,s.w5)((()=>[(0,s._)("h1",k,(0,a.zw)(e.title),1)])),_:2},1032,["to"]),(0,s._)("h2",I,(0,a.zw)(e.description),1),(0,s._)("div",$,[(0,s._)("p",C," NT$ "+(0,a.zw)(t.$filters.currency(e.price)),1),(0,s._)("del",D,"NT$ "+(0,a.zw)(t.$filters.currency(e.origin_price)),1)])])]),(0,s._)("div",j,[(0,s._)("button",{onClick:t=>T.addCart(e.id),type:"button",class:"add-cart-btn btn bg-primary rounded-3 text-white mt-3 px-3 d-flex align-items-center",disabled:S.loadingItem===e.id},[z,S.loadingItem===e.id?((0,s.wg)(),(0,s.iD)("div",F,P)):(0,s.kq)("",!0)],8,L)])])])])))),128))]))]),(0,s.Wm)(U,{active:S.isLoading},null,8,["active"])],64)}var T=i(9208),W={mixins:[T.Z],inject:["emitter"],data(){return{products:[],product:[],loadingItem:"",isLoading:!1}},methods:{getProductsList(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/utshang216/products/all").then((t=>{this.products=t.data.products,this.isLoading=!1,this.getFavoriteProducts()})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},getFavoriteProducts(){this.product=this.products.filter((t=>this.favorite.includes(t.id)))},addCart(t,e=1){this.loadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/utshang216/cart",{data:{product_id:t,qty:e}}).then((()=>{this.loadingItem="",this.emitter.emit("push-message",{style:"success",title:"成功加入購物車囉！"}),this.emitter.emit("get-cart")})).catch((()=>{this.emitter.emit("push-message",{style:"success",title:"加入購物車失敗囉，請重新加入！"})}))}},mounted(){this.getProductsList(),this.emitter.emit("get-fav",this.favorite)}},U=i(3744);const Z=(0,U.Z)(W,[["render",S],["__scopeId","data-v-5bee7d74"]]);var q=Z},6497:function(t,e,i){t.exports=i.p+"img/favorite.38596e0c.jpg"}}]);
//# sourceMappingURL=198.fc4ec02f.js.map