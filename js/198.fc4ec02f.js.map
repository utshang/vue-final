{"version":3,"file":"js/198.fc4ec02f.js","mappings":"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","sources":["webpack://vue-final/./src/mixins/FavoriteMixin.js","webpack://vue-final/./src/views/frontend/FavoriteView.vue","webpack://vue-final/./src/views/frontend/FavoriteView.vue?0982"],"sourcesContent":["export default {\n  inject: [\"emitter\"],\n  data() {\n    return {\n      //從 localStorage 取出資料\n      //給預設值[]\n      favorite: JSON.parse(localStorage.getItem(\"favorite\")) || [],\n    };\n  },\n  methods: {\n    toggleFav(id) {\n      //查 favorite 中有沒有這一個 id\n      //findIndex() 方法返回陣列中滿足提供的測試函式的第一個元素的索引。若沒有找到對應元素則返回-1。\n      const favIDd = this.favorite.findIndex((item) => item === id);\n\n      //如果沒有這一個 id，push 進去 favorite 裡\n      if (favIDd === -1) {\n        this.favorite.push(id);\n        this.emitter.emit(\"push-message\", {\n          style: \"success\",\n          title: \"已經加入最愛囉！\",\n        });\n        //如果有這一個 id，從 favorite 中將 favIDd 刪掉\n      } else {\n        this.favorite.splice(favIDd, 1);\n        this.emitter.emit(\"push-message\", {\n          style: \"danger\",\n          title: \"已經移除最愛囉！\",\n        });\n      }\n      this.emitter.emit(\"get-fav\", this.favorite);\n    },\n  },\n  watch: {\n    favorite: {\n      //深層監聽\n      deep: true,\n      //handler 控制器\n      handler() {\n        //localStorage 自訂欄位 \"favorite\"\n        //監聽 favorite，favorite 有變動時有變動時就寫入\n        localStorage.setItem(\"favorite\", JSON.stringify(this.favorite));\n      },\n    },\n  },\n};\n","<template>\n  <div\n    class=\"banner mt-3 d-md-none d-block\"\n    :style=\"{\n      backgroundImage: `url(${require('@/assets/images/front/favorite.jpg')} )`,\n    }\"\n  ></div>\n  <div class=\"container\">\n    <div\n      class=\"banner mt-3 d-md-block d-none\"\n      :style=\"{\n        backgroundImage: `url(${require('@/assets/images/front/favorite.jpg')} )`,\n      }\"\n    ></div>\n    <h2 class=\"title text-primary fw-bold text-center mt-5\">我的最愛</h2>\n    <template v-if=\"product.length === 0\">\n      <div class=\"p-5 text-center\">\n        <span class=\"material-icons-outlined heart_broken text-primary mb-3\">\n          heart_broken\n        </span>\n        <p class=\"text-muted mb-4\">我的最愛空空的唷！</p>\n\n        <RouterLink\n          to=\"/products\"\n          class=\"bg-primary text-white py-2 px-5 rounded-3\"\n          >來去逛逛！</RouterLink\n        >\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"fav-list my-5\">\n        <div v-for=\"item in product\" :key=\"item.id\">\n          <div class=\"fav-item rounded-3 shadow p-4 mb-4 d-flex row\">\n            <div class=\"col-sm-5 col-md-3\">\n              <RouterLink :to=\"`/product/${item.id}`\">\n                <img\n                  class=\"fav-item-img rounded-3\"\n                  :src=\"item.imageUrl\"\n                  :alt=\"item.title\"\n                />\n              </RouterLink>\n            </div>\n            <div\n              class=\"col-sm-7 col-md-9 mt-4 mt-sm-1 d-flex flex-column justify-content-between\"\n            >\n              <div>\n                <div class=\"d-flex justify-content-between\">\n                  <span\n                    class=\"badge bg-primary fav-item-tag mb-3 d-flex align-items-center justify-content-center\"\n                  >\n                    {{ item.category }}</span\n                  >\n                  <div\n                    class=\"fav-icon text-end\"\n                    @click=\"toggleFav(item.id), getFavoriteProducts()\"\n                  >\n                    <span\n                      class=\"material-icons-outlined text-primary favorite\"\n                      v-if=\"favorite.includes(item.id)\"\n                    >\n                      favorite\n                    </span>\n                    <span\n                      class=\"material-icons-outlined text-primary favorite\"\n                      v-else\n                    >\n                      favorite_border\n                    </span>\n                  </div>\n                </div>\n                <div class=\"fav-body mt-sm-1\">\n                  <RouterLink :to=\"`/product/${item.id}`\">\n                    <h1\n                      class=\"fav-item-title text-primary fw-bold mb-3 lh-base\"\n                    >\n                      {{ item.title }}\n                    </h1>\n                  </RouterLink>\n                  <h2 class=\"fav-item-description fs-7 text-muted mb-4 lh-base\">\n                    {{ item.description }}\n                  </h2>\n                  <div class=\"d-flex align-items-end fw-bold\">\n                    <p class=\"fs-5 text-black me-2\">\n                      NT$ {{ $filters.currency(item.price) }}\n                    </p>\n                    <del class=\"fs-7 text-muted\"\n                      >NT$ {{ $filters.currency(item.origin_price) }}</del\n                    >\n                  </div>\n                </div>\n              </div>\n              <div class=\"d-md-flex flex-md-column align-self-md-end\">\n                <button\n                  @click=\"addCart(item.id)\"\n                  type=\"button\"\n                  class=\"add-cart-btn btn bg-primary rounded-3 text-white mt-3 px-3 d-flex align-items-center\"\n                  :disabled=\"loadingItem === item.id\"\n                >\n                  加入購物車\n                  <div class=\"loader\" title=\"1\" v-if=\"loadingItem === item.id\">\n                    <svg\n                      version=\"1.1\"\n                      id=\"loader-1\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                      x=\"0px\"\n                      y=\"0px\"\n                      width=\"20px\"\n                      height=\"20px\"\n                      viewBox=\"0 0 50 50\"\n                      style=\"enable-background: new 0 0 50 50\"\n                      xml:space=\"preserve\"\n                    >\n                      <path\n                        fill=\"#000\"\n                        d=\"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z\"\n                      >\n                        <animateTransform\n                          attributeType=\"xml\"\n                          attributeName=\"transform\"\n                          type=\"rotate\"\n                          from=\"0 25 25\"\n                          to=\"360 25 25\"\n                          dur=\"0.6s\"\n                          repeatCount=\"indefinite\"\n                        />\n                      </path>\n                    </svg>\n                  </div>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n  <VeeLoading :active=\"isLoading\" />\n</template>\n\n<script>\nimport FavoriteMixin from \"@/mixins/FavoriteMixin\";\n\nexport default {\n  mixins: [FavoriteMixin],\n  inject: [\"emitter\"],\n  data() {\n    return {\n      products: [],\n      product: [],\n      loadingItem: \"\",\n      isLoading: false,\n    };\n  },\n  methods: {\n    getProductsList() {\n      this.isLoading = true;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          this.isLoading = false;\n          this.getFavoriteProducts();\n        })\n        .catch((err) => {\n          this.$httpMessageState(err.response, \"錯誤訊息\");\n        });\n    },\n    getFavoriteProducts() {\n      this.product = this.products.filter((item) =>\n        this.favorite.includes(item.id)\n      );\n    },\n    addCart(id, qty = 1) {\n      this.loadingItem = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/v2/api/${process.env.VUE_APP_PATH}/cart`,\n          {\n            data: { product_id: id, qty },\n          }\n        )\n        .then(() => {\n          this.loadingItem = \"\";\n\n          this.emitter.emit(\"push-message\", {\n            style: \"success\",\n            title: \"成功加入購物車囉！\",\n          });\n          this.emitter.emit(\"get-cart\");\n        })\n        .catch(() => {\n          this.emitter.emit(\"push-message\", {\n            style: \"success\",\n            title: \"加入購物車失敗囉，請重新加入！\",\n          });\n        });\n    },\n  },\n  mounted() {\n    this.getProductsList();\n    this.emitter.emit(\"get-fav\", this.favorite);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$white: #fffafa;\n\n.banner {\n  height: calc(100vh - 500px);\n  background-attachment: fixed;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center center;\n}\n.heart_broken {\n  font-size: 5rem;\n}\n@media screen and (min-width: 769px) {\n  .row {\n    padding: 0 7.5rem;\n  }\n}\n@media screen and (min-width: 769px) {\n  .fav-list {\n    padding: 0 7.5rem;\n  }\n}\n.fav-item {\n  margin: 0 auto;\n  &-img {\n    height: 18rem;\n    width: 100%;\n    object-fit: cover;\n  }\n  &-title {\n    font-size: 1.5rem;\n  }\n  &-description {\n    display: none;\n  }\n\n  .favorite {\n    cursor: pointer;\n  }\n}\n@media screen and (min-width: 576px) {\n  .fav-img {\n    height: 15rem;\n    width: 15rem;\n  }\n}\n\n@media screen and (min-width: 769px) {\n  .fav-item-description {\n    display: block;\n  }\n}\n\n.loader {\n  text-align: center;\n  display: inline-block;\n  vertical-align: top;\n}\n\nsvg path,\nsvg rect {\n  fill: $white;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=5bee7d74&scoped=true\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=5bee7d74&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/ashleyshang/Desktop/vue-final/vue-final/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bee7d74\"]])\n\nexport default __exports__"],"names":["inject","data","favorite","JSON","parse","localStorage","getItem","methods","toggleFav","id","favIDd","this","findIndex","item","push","emitter","emit","style","title","splice","watch","deep","handler","setItem","stringify","class","_createElementVNode","version","xmlns","x","y","width","height","viewBox","fill","d","attributeType","attributeName","type","from","to","dur","repeatCount","_hoisted_27","require","_hoisted_2","$data","length","_createElementBlock","_hoisted_4","_hoisted_5","_createVNode","_component_RouterLink","_Fragment","_renderList","key","src","imageUrl","alt","_toDisplayString","category","onClick","_ctx","$options","includes","description","currency","price","origin_price","disabled","_hoisted_28","_component_VeeLoading","active","mixins","FavoriteMixin","products","product","loadingItem","isLoading","getProductsList","$http","get","then","res","getFavoriteProducts","catch","err","$httpMessageState","response","filter","addCart","qty","post","product_id","mounted","__exports__","render"],"sourceRoot":""}