"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[628],{8609:function(t,e,s){s.d(e,{Z:function(){return n}});var i=s(6252),a=s(3577);const r={class:"d-flex justify-content-around mt-5"};function c(t,e,s,c,o,l){return(0,i.wg)(),(0,i.iD)("ul",r,[(0,i._)("li",{class:(0,a.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":s.step>"0"}])},[(0,i._)("div",{class:(0,a.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":s.step>"0"}])}," 1 ",2),(0,i._)("p",{class:(0,a.C_)(["font fs-7",{"font-active":s.step>"0"}])},"購物清單",2)],2),(0,i._)("li",{class:(0,a.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":s.step>"1"}])},[(0,i._)("div",{class:(0,a.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":s.step>"1"}])}," 2 ",2),(0,i._)("p",{class:(0,a.C_)(["font fs-7",{"font-active":s.step>"1"}])},"填寫資料",2)],2),(0,i._)("li",{class:(0,a.C_)(["progress-li d-flex flex-column align-items-center",{"progress-li-active":s.step>"2"}])},[(0,i._)("div",{class:(0,a.C_)(["progress mb-4 d-flex align-items-center justify-content-center circle rounded-circle",{"progress-active":s.step>"2"}])}," 3 ",2),(0,i._)("p",{class:(0,a.C_)(["font fs-7",{"font-active":s.step>"2"}])},"確認訂單",2)],2)])}var o={props:{step:String}},l=s(3744);const d=(0,l.Z)(o,[["render",c],["__scopeId","data-v-5d7e876a"]]);var n=d},8628:function(t,e,s){s.r(e),s.d(e,{default:function(){return _t}});var i=s(6252),a=s(3577),r=s(9963);const c=t=>((0,i.dD)("data-v-4474aedc"),t=t(),(0,i.Cn)(),t),o={class:"container"},l={class:"my-5"},d={class:"cart-list rounded-3 shadow p-5"},n={class:"d-flex justify-content-between align-items-end fs-7 border-bottom border-2 border-secondary pb-3"},u=c((()=>(0,i._)("h2",{class:"fw-bold fs-4"},"購物車",-1))),p=["disabled"],m={class:"cart-list-body mt-4 d-flex"},h={class:"d-flex flex-grow-1"},g=["src","alt"],f={class:"d-flex flex-column justify-content-start ms-3 mt-2"},_={class:"fs-5 fw-bold text-black"},y={class:"select-num"},w=["onUpdate:modelValue","onChange","disabled"],b=["value"],v={class:"d-sm-none d-flex align-items-end"},x={class:"fw-bold fs-7 mt-3"},C={class:"fs-8 text-muted ms-2"},k={class:"d-sm-flex flex-sm-column justify-content-sm-between mt-1"},$=["onClick"],P=c((()=>(0,i._)("span",{class:"material-icons-outlined text-end d-block"}," delete ",-1))),D=[P],I={class:"d-none d-sm-block"},j={class:"mb-2 fw-bold fs-5"},L={class:"fs-7 text-muted d-flex flex-column align-items-end"},z={class:"d-flex flex-column align-items-end mt-4 pt-4"},T={class:"price-group"},S={class:"text-end text-muted fs-6 d-flex justify-content-between"},q=(0,i.Uk)(" 原售價 "),U={class:"text-end text-muted fs-6 d-flex justify-content-between mt-2"},N=(0,i.Uk)(" 優惠卷 "),W={class:"text-end fw-bold text-primary fs-6 d-flex justify-content-between border-top border-2 pt-3 mt-3"},V=(0,i.Uk)(" 總金額 "),A={class:"fs-4"},M={class:"d-flex apply my-3"},B=["placeholder"],H={key:1,class:"text-center pt-4"},R=c((()=>(0,i._)("span",{class:"material-icons-outlined add_shopping_cart text-primary pb-3"}," add_shopping_cart ",-1))),Y=c((()=>(0,i._)("p",{class:"text-muted mb-4"},"購物車空空的唷！",-1))),Z=(0,i.Uk)("來去挑選商品！"),O={class:"my-6"},K=c((()=>(0,i._)("h2",{class:"text-primary fw-bold mb-4"},[(0,i.Uk)(" 推薦商品 "),(0,i._)("span",{class:"fs-5"},"Recommend")],-1)));function E(t,e,s,c,P,E){const F=(0,i.up)("ProgressBar"),G=(0,i.up)("RouterLink"),J=(0,i.up)("CartSwiper"),Q=(0,i.up)("VeeLoading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(F,{step:"1"}),(0,i._)("div",o,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",n,[u,(0,i._)("button",{class:"text-muted d-block border-0",type:"button",onClick:e[0]||(e[0]=(...t)=>E.delAllProduct&&E.delAllProduct(...t)),disabled:0===P.cartData.carts?.length}," 清除購物車 ",8,p)]),P.cartData.carts?.length?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.cartData.carts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[(0,i._)("div",m,[(0,i._)("div",h,[(0,i.Wm)(G,{to:`/product/${e.product.id}`},{default:(0,i.w5)((()=>[(0,i._)("img",{class:"cart-img rounded-3",src:e.product.imageUrl,alt:e.title},null,8,g)])),_:2},1032,["to"]),(0,i._)("div",f,[(0,i.Wm)(G,{to:`/product/${e.product.id}`,class:"mb-3"},{default:(0,i.w5)((()=>[(0,i._)("h1",_,(0,a.zw)(e.product.title),1)])),_:2},1032,["to"]),(0,i._)("div",y,[(0,i.wy)((0,i._)("select",{id:"",class:"form-select border border-1","onUpdate:modelValue":t=>e.qty=t,onChange:t=>E.updateCartItem(e),disabled:P.loadingItem===e.id},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(20,(t=>(0,i._)("option",{value:t,key:`${t}${e.id}`},(0,a.zw)(t),9,b))),64))],40,w),[[r.bM,e.qty]])]),(0,i._)("div",v,[(0,i._)("p",x," NT$ "+(0,a.zw)(t.$filters.currency(e.product.price*e.qty)),1),(0,i._)("del",C," NT$ "+(0,a.zw)(t.$filters.currency(e.product.origin_price*e.qty)),1)])])]),(0,i._)("div",k,[(0,i._)("a",{class:"text-muted flex-shrink-1",onClick:t=>E.delProduct(e.id)},D,8,$),(0,i._)("div",I,[(0,i._)("p",j," NT$ "+(0,a.zw)(t.$filters.currency(e.product.price*e.qty)),1),(0,i._)("del",L," NT$ "+(0,a.zw)(t.$filters.currency(e.product.origin_price*e.qty)),1)])])])])))),128)),(0,i._)("div",z,[(0,i._)("div",T,[(0,i._)("ul",null,[(0,i._)("li",S,[q,(0,i._)("span",null," NT$ "+(0,a.zw)(t.$filters.currency(P.cartData.total)),1)]),(0,i._)("li",U,[N,(0,i._)("span",null,"-NT$ "+(0,a.zw)(t.$filters.currency(P.cartData.total-P.cartData.final_total)),1)]),(0,i._)("li",W,[V,(0,i._)("span",A,"NT$ "+(0,a.zw)(t.$filters.currency(P.cartData.final_total)),1)])])]),(0,i._)("div",M,[(0,i.wy)((0,i._)("input",{type:"text ",class:"form-control apply-input fs-7 rounded-0 border border-2 border-muted search","onUpdate:modelValue":e[1]||(e[1]=t=>P.couponCode=t),placeholder:P.message},null,8,B),[[r.nr,P.couponCode]]),(0,i._)("button",{class:"btn btn-outline-primary text-white apply-btn fs-7 rounded-0",type:"button",onClick:e[2]||(e[2]=(...t)=>E.ApplyCoupon&&E.ApplyCoupon(...t))}," 套用 ")]),(0,i._)("button",{type:"button",to:"/checkOrder",class:"btn btn-primary text-white chekout-btn fs-6",onClick:e[3]||(e[3]=t=>E.goToCheckOrder())}," 前往結帳 ")])],64)):((0,i.wg)(),(0,i.iD)("div",H,[R,Y,(0,i.Wm)(G,{to:"/products",class:"bg-primary text-white py-2 px-5 rounded-3"},{default:(0,i.w5)((()=>[Z])),_:1})]))])]),(0,i._)("div",O,[K,(0,i.Wm)(J,{products:P.randomProducts},null,8,["products"])])]),(0,i.Wm)(Q,{active:P.isLoading},null,8,["active"])],64)}var F=s(8609);const G=t=>((0,i.dD)("data-v-4d488fae"),t=t(),(0,i.Cn)(),t),J={class:"card h-100"},Q={class:"card-body d-flex justify-content-between"},X={class:"product-title fw-bold mb-2"},tt={class:"product-price fw-bold text-primary"},et=["onClick"],st={key:0,class:"loader",title:"1"},it=G((()=>(0,i._)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[(0,i._)("path",{fill:"#000",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"},[(0,i._)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})])],-1))),at=[it],rt={key:1,class:"cart-icon text-primary"},ct=G((()=>(0,i._)("span",{class:"material-icons-outlined"}," add_shopping_cart ",-1))),ot=[ct];function lt(t,e,s,r,c,o){const l=(0,i.up)("RouterLink"),d=(0,i.up)("SwiperSlide"),n=(0,i.up)("Swiper");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{modules:c.modules,"space-between":50,breakpoints:c.swiper.breakpoints,autoplay:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.products,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.id,class:"swiper-slide"},{default:(0,i.w5)((()=>[(0,i._)("div",J,[(0,i.Wm)(l,{to:`/product/${e.id}`},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"swiper-slide-inner",style:(0,a.j5)([{height:"18rem","background-position":"center center","background-size":"cover"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)])),_:2},1032,["to"]),(0,i._)("div",Q,[(0,i._)("div",null,[(0,i._)("h2",X,(0,a.zw)(e.title),1),(0,i._)("p",tt," NT$ "+(0,a.zw)(t.$filters.currency(e.price)),1)]),(0,i._)("div",{class:"align-self-end",onClick:t=>o.addCart(e.id)},[c.loadingItem===e.id?((0,i.wg)(),(0,i.iD)("div",st,at)):((0,i.wg)(),(0,i.iD)("a",rt,ot))],8,et)])])])),_:2},1024)))),128))])),_:1},8,["modules","breakpoints"])])}var dt=s(3181),nt=s(4040),ut={props:{products:{type:Array,default(){return[]}}},components:{Swiper:dt.tq,SwiperSlide:dt.o5},inject:["emitter"],data(){return{loadingItem:"",isLoading:!1,randomProducts:[],modules:[nt.W_,nt.tl,nt.pt,nt.lI],swiper:{autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:50}}}}},methods:{addCart(t,e=1){this.loadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/utshang216/cart",{data:{product_id:t,qty:e}}).then((()=>{this.loadingItem="",this.emitter.emit("get-cart"),this.emitter.emit("add-cart"),this.emitter.emit("push-message",{style:"success",title:"成功加入購物車囉！"})})).catch((()=>{this.emitter.emit("push-message",{style:"success",title:"加入購物車失敗囉，請重新加入！"})}))}}},pt=s(3744);const mt=(0,pt.Z)(ut,[["render",lt],["__scopeId","data-v-4d488fae"]]);var ht=mt,gt={components:{CartSwiper:ht,ProgressBar:F.Z},inject:["emitter"],data(){return{couponCode:"",success:"",message:"",products:[],randomProducts:[],loadingItem:"",isLoading:!1,cartPrice:{},cartData:{}}},methods:{getProductsList(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/utshang216/products/all").then((t=>{this.products=t.data.products,this.getCart()})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},getRandomProducts(){const t=this.cartData.carts.map((t=>t.product_id)),e=[...t];this.randomProducts=this.products.filter((t=>!e.includes(t.id)));for(let s=this.randomProducts.length-1;s>0;s--){let t=Math.floor(Math.random()*(s+1));[this.randomProducts[s],this.randomProducts[t]]=[this.randomProducts[t],this.randomProducts[s]]}this.randomProducts=this.randomProducts.splice(0,10)},updateCartItem(t){this.loadingItem=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/utshang216/cart/${t.id}`,{data:{product_id:t.id,qty:t.qty}}).then((()=>{this.getCart(),this.loadingItem="",this.isLoading=!1,this.emitter.emit("push-message",{style:"success",title:"成功更新商品囉！"})})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"更新商品失敗囉！"})}))},getCart(){document.documentElement.scrollTop=0,this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/utshang216/cart").then((t=>{this.cartData=t.data.data,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t.response,"錯誤訊息")}))},delProduct(t){this.isLoading=!0,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/utshang216/cart/${t}`).then((()=>{this.getCart(),this.isLoading=!1,this.emitter.emit("get-cart"),this.emitter.emit("push-message",{style:"success",title:"成功刪除商品囉！"})})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"刪除商品失敗囉！"})}))},delAllProduct(){this.isLoading=!0,this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/utshang216/carts").then((()=>{this.getCart(),this.emitter.emit("push-message",{style:"success",title:"成功刪除所有商品囉！"}),this.emitter.emit("get-cart"),this.isLoading=!1})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"刪除所有商品失敗囉！"})}))},goToCheckOrder(){this.$router.push("/checkorder")},ApplyCoupon(){const t={code:this.couponCode};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/utshang216/coupon",{data:t}).then((t=>{this.success=t.data.success,this.message=t.data.message,this.couponCode="",this.getCart(),this.emitter.emit("push-message",{style:"success",title:"優惠碼套用成功！"})})).catch((()=>{this.emitter.emit("push-message",{style:"danger",title:"優惠碼不存在！"})}))}},watch:{cartData(){this.getRandomProducts()}},mounted(){this.getProductsList(),this.emitter.on("add-cart",(()=>{this.getCart()}))}};const ft=(0,pt.Z)(gt,[["render",E],["__scopeId","data-v-4474aedc"]]);var _t=ft}}]);
//# sourceMappingURL=628.1d374dda.js.map